# ğŸ§¯ SignBell íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

> ## **"ê²Œì„ ì¤‘ ì°¸ê°€ì ì—°ê²° í•´ì œ ì‹œ ê²Œì„ ì§„í–‰ ì¤‘ë‹¨ ë° ë°ì´í„° ë¶ˆì¼ì¹˜ ë¬¸ì œ"**
> (ì°¸ê°€ìê°€ ê²Œì„ ì¤‘ ì°½ì„ ë‹«ìœ¼ë©´ ê²Œì„ì´ ë©ˆì¶”ê³  ë­í‚¹ì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ)

---

### 1.  ë¬¸ì œ ìƒí™© (Problem)

#### ì‹œë„ ë° ê³¼ì •
- ê²Œì„ ì§„í–‰ ì¤‘ ì°¸ê°€ìì˜ WebSocket ì—°ê²° í•´ì œë¥¼ ê°ì§€í•˜ëŠ” `WebSocketEventsListener`ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- ì—°ê²° í•´ì œ ì‹œ ìë™ìœ¼ë¡œ ë°©ì—ì„œ í‡´ì¥ ì²˜ë¦¬í•˜ëŠ” `GameRoomLeaveService`ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- ê²Œì„ ì¢…ë£Œ ì‹œ ìºì‹œì—ì„œ ì ìˆ˜ë¥¼ ì¡°íšŒí•˜ì—¬ ë­í‚¹ì„ ìƒì„±í•˜ê³  DBì— ì €ì¥í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

#### ê¸ì •ì  ê´€ì°°
- ëŒ€ê¸°ì‹¤ì—ì„œ ì°¸ê°€ìê°€ ë‚˜ê°€ëŠ” ê²½ìš°, ì •ìƒì ìœ¼ë¡œ í‡´ì¥ ì²˜ë¦¬ë˜ê³  ë‹¤ë¥¸ ì°¸ê°€ìë“¤ì—ê²Œ ì•Œë¦¼ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.
- ê²Œì„ì´ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ë©´ ì ìˆ˜ê°€ ì •í™•í•˜ê²Œ ê³„ì‚°ë˜ê³  ë­í‚¹ì´ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤.

#### í•µì‹¬ ë¬¸ì œ ë°œìƒ
1. **ê²Œì„ ì¤‘ ì°¸ê°€ìê°€ ì°½ì„ ë‹«ìœ¼ë©´**:
   - ìºì‹œì—ëŠ” í•´ë‹¹ ì°¸ê°€ìì˜ ì ìˆ˜ê°€ ë‚¨ì•„ìˆìŒ
   - DBì—ì„œëŠ” `GameParticipant`ê°€ ì‚­ì œë¨
   - ê²Œì„ ì¢…ë£Œ ì‹œ ìºì‹œì˜ userIdë¡œ Userë¥¼ ì¡°íšŒí•˜ë©´ ì‹¤íŒ¨
   - ë­í‚¹ ìƒì„± ì¤‘ `continue`ë¡œ ê±´ë„ˆë›°ë©´ì„œ ìˆœìœ„ê°€ 1, 2, 4ë“±ìœ¼ë¡œ ê±´ë„ˆëœ€

2. **ë„ì „ ì°¨ë¡€ì¸ ì‚¬ëŒì´ ë‚˜ê°€ë©´**:
   - `currentChallenger`ê°€ ë‚˜ê°„ ì‚¬ëŒì˜ userIdë¡œ ë‚¨ì•„ìˆìŒ
   - ì•„ë¬´ë„ ë‹µì„ ì œì¶œí•  ìˆ˜ ì—†ì–´ ê²Œì„ì´ ë©ˆì¶¤
   - íƒ€ì„ì•„ì›ƒë„ ì—†ì–´ì„œ ì˜êµ¬ì ìœ¼ë¡œ ëŒ€ê¸° ìƒíƒœ

<br>

**[ê´€ë ¨ ì½”ë“œ: ë¬¸ì œê°€ ë°œìƒí•œ ë¡œì§]**

```java
// QuizService.java - endGame()
@Transactional
public void endGame(Long roomId) {
    Map<Long, Integer> roundScores = roomState.getAllUserScores();
    
    // ì ìˆ˜ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬
    List<Map.Entry<Long, Integer>> sortedScores = roundScores.entrySet().stream()
            .sorted(Map.Entry.<Long, Integer>comparingByValue().reversed())
            .collect(Collectors.toList());
    
    // User ì¡°íšŒ
    List<Long> userIds = sortedScores.stream()
            .map(Map.Entry::getKey)
            .collect(Collectors.toList());
    
    Map<Long, User> userMap = userRepository.findAllById(userIds).stream()
            .collect(Collectors.toMap(User::getId, user -> user));
    
    // âŒ ë¬¸ì œ: í‡´ì¥í•œ ì‚¬ëŒì€ Userë¥¼ ëª» ì°¾ìŒ
    for (int i = 0; i < sortedScores.size(); i++) {
        Long userId = entry.getKey();
        User user = userMap.get(userId);
        
        if (user == null) {
            log.warn("ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {}", userId);
            continue;  // âŒ ìˆœìœ„ê°€ 1, 2, 4ë“±ìœ¼ë¡œ ê±´ë„ˆëœ€
        }
        
        rankings.add(RankingInfo.builder()
                .rank(i + 1)  // âŒ ì˜ëª»ëœ ìˆœìœ„
                ...
        );
    }
}
```

**[ë¬¸ì œ ìƒí™© ë¡œê·¸]**

```bash
# ê²Œì„ ì¤‘ ì°¸ê°€ì í‡´ì¥
INFO  - User 123 leaving room 1
INFO  - ì°¸ê°€ì ì •ë³´ ì‚­ì œ ì™„ë£Œ
INFO  - ê²Œì„ë°© í˜„ì¬ ì¸ì›: 3ëª…

# ê²Œì„ ì¢…ë£Œ ì‹œ
INFO  - ê²Œì„ ì¢…ë£Œ - roomId: 1, participants: 4
WARN  - ë­í‚¹ ì²˜ë¦¬ ì¤‘ ID 123 ì— í•´ë‹¹í•˜ëŠ” ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
INFO  - GameHistory ì €ì¥ - userId: 456, rank: 1
INFO  - GameHistory ì €ì¥ - userId: 789, rank: 2
INFO  - GameHistory ì €ì¥ - userId: 101, rank: 3
# âŒ userId 123ì€ ë­í‚¹ì—ì„œ ëˆ„ë½ë¨
```

**[ì‹œë‚˜ë¦¬ì˜¤ë³„ ë¬¸ì œ ìƒí™©]**

```
ì‹œë‚˜ë¦¬ì˜¤ 1: ì¼ë°˜ ì°¸ê°€ìê°€ ê²Œì„ ì¤‘ ë‚˜ê°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì°¸ê°€ì: A(123), B(456), C(789), D(101) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ê²Œì„ ì§„í–‰ ì¤‘...                      â”‚
â”‚ Aì˜ ì ìˆ˜: 150ì  (ìºì‹œì— ì €ì¥ë¨)      â”‚
â”‚                                     â”‚
â”‚ Aê°€ ì°½ì„ ë‹«ìŒ (ì—°ê²° í•´ì œ)            â”‚
â”‚ â†’ DBì—ì„œ GameParticipant ì‚­ì œ        â”‚
â”‚ â†’ ìºì‹œì—ëŠ” ì ìˆ˜ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆìŒ      â”‚
â”‚                                     â”‚
â”‚ ê²Œì„ ì¢…ë£Œ                            â”‚
â”‚ â†’ ìºì‹œì—ì„œ Aì˜ ì ìˆ˜ ì¡°íšŒ: 150ì  âœ…   â”‚
â”‚ â†’ DBì—ì„œ Aì˜ User ì¡°íšŒ: ì‹¤íŒ¨ âŒ     â”‚
â”‚ â†’ AëŠ” ë­í‚¹ì—ì„œ ì œì™¸ë¨                â”‚
â”‚ â†’ ìˆœìœ„: 1ë“±(B), 2ë“±(C), 3ë“±(D)       â”‚
â”‚   (Aê°€ 1ë“±ì´ì—ˆëŠ”ë° ëˆ„ë½ë¨)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì‹œë‚˜ë¦¬ì˜¤ 2: ë„ì „ ì°¨ë¡€ì¸ ì‚¬ëŒì´ ë‚˜ê°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¬¸ì œ 3ë²ˆ ì§„í–‰ ì¤‘                     â”‚
â”‚ ë„ì „ ìˆœì„œ: A â†’ B â†’ C                 â”‚
â”‚ í˜„ì¬ ì°¨ë¡€: A (currentChallenger=123) â”‚
â”‚                                     â”‚
â”‚ Aê°€ ì°½ì„ ë‹«ìŒ (ì—°ê²° í•´ì œ)            â”‚
â”‚ â†’ DBì—ì„œ GameParticipant ì‚­ì œ        â”‚
â”‚ â†’ ìºì‹œì˜ currentChallengerëŠ” ê·¸ëŒ€ë¡œ â”‚
â”‚                                     â”‚
â”‚ âŒ ê²Œì„ì´ ë©ˆì¶¤!                      â”‚
â”‚ â†’ Aë¥¼ ê¸°ë‹¤ë¦¬ì§€ë§Œ AëŠ” ì—†ìŒ            â”‚
â”‚ â†’ B, CëŠ” ë‹µì„ ì œì¶œí•  ìˆ˜ ì—†ìŒ         â”‚
â”‚ â†’ íƒ€ì„ì•„ì›ƒ ì—†ì–´ì„œ ì˜êµ¬ ëŒ€ê¸°          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. ğŸ§ ì›ì¸ ë¶„ì„ (Analysis)

#### ê°€ì„¤ 1 (ê°€ì¥ ìœ ë ¥í•œ ì›ì¸): ìºì‹œì™€ DBì˜ ë°ì´í„° ë¶ˆì¼ì¹˜
- **ë¬¸ì œì˜ í•µì‹¬**: ì°¸ê°€ìê°€ í‡´ì¥í•˜ë©´ DBì—ì„œëŠ” ì‚­ì œë˜ì§€ë§Œ, ìºì‹œì—ëŠ” ë°ì´í„°ê°€ ë‚¨ì•„ìˆì—ˆìŠµë‹ˆë‹¤.
- `GameRoomLeaveService`ëŠ” DBë§Œ ì •ë¦¬í•˜ê³  ìºì‹œëŠ” ì •ë¦¬í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
- ê²Œì„ ì¢…ë£Œ ì‹œ ìºì‹œì˜ userIdë¡œ DBë¥¼ ì¡°íšŒí•˜ë©´ì„œ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

#### ê°€ì„¤ 2 (ë¶€ì°¨ì ì¸ ì›ì¸): ë„ì „ ì°¨ë¡€ ê´€ë¦¬ ë¯¸í¡
- ë„ì „ ì°¨ë¡€ì¸ ì‚¬ëŒì´ ë‚˜ê°€ë„ `currentChallenger`ê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
- ë‹¤ìŒ ë„ì „ìì—ê²Œ ìë™ìœ¼ë¡œ ì°¨ë¡€ë¥¼ ë„˜ê¸°ëŠ” ë¡œì§ì´ ì—†ì—ˆìŠµë‹ˆë‹¤.

#### ê°€ì„¤ 3: ë­í‚¹ ìˆœìœ„ ê³„ì‚° ë¡œì§ ì˜¤ë¥˜
- `for (int i = 0; i < sortedScores.size(); i++)`ì—ì„œ `i`ë¥¼ ê·¸ëŒ€ë¡œ ìˆœìœ„ë¡œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- `continue`ë¡œ ê±´ë„ˆë›°ë©´ ìˆœìœ„ê°€ 1, 2, 4ë“±ìœ¼ë¡œ ê±´ë„ˆë›°ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

#### ê²°ë¡ 
ê²Œì„ ì¤‘ í‡´ì¥ì€ **"ì˜ˆì™¸ ìƒí™©"ì´ ì•„ë‹Œ "ì •ìƒ ì‹œë‚˜ë¦¬ì˜¤"**ë¡œ ì²˜ë¦¬í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ DBì—ì„œ ì‚­ì œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼:
1. ìºì‹œì—ì„œë„ í•´ë‹¹ ì°¸ê°€ìì˜ ë°ì´í„°ë¥¼ ì •ë¦¬
2. ë„ì „ ì°¨ë¡€ì˜€ë‹¤ë©´ ë‹¤ìŒ ë„ì „ìì—ê²Œ ë„˜ê¹€
3. ê²Œì„ ì¢…ë£Œ ì‹œ í‡´ì¥í•œ ì‚¬ëŒì€ ë­í‚¹ì—ì„œ ì œì™¸

ì´ ì„¸ ê°€ì§€ë¥¼ ëª¨ë‘ ì²˜ë¦¬í•´ì•¼ ê²Œì„ì´ ì •ìƒì ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

<br>

**[ë¶„ì„ ê³¼ì •ì—ì„œ ë°œê²¬í•œ ì¶”ê°€ ì´ìŠˆ]**

```java
// GameRoomLeaveService.java - handleParticipantLeave()
private ParticipantEventResponse handleParticipantLeave(...) {
    // 1. ì°¸ê°€ì ì •ë³´ ì‚­ì œ
    participantRepository.delete(participant);
    
    // 2. ë°© ì¸ì› ìˆ˜ ê°ì†Œ
    room.decrementParticipants();
    
    // âŒ 3. ê²Œì„ ì§„í–‰ ì¤‘ì¸ì§€ í™•ì¸ ì•ˆ í•¨
    // âŒ 4. ìºì‹œ ì •ë¦¬ ì•ˆ í•¨
    
    gameRoomRepository.save(room);
    return response;
}
```

**ë°œê²¬**: ê²Œì„ ìƒíƒœë¥¼ í™•ì¸í•˜ì§€ ì•Šê³  ë¬´ì¡°ê±´ DBë§Œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

---

### 3. ğŸ’¡ í•´ê²° ë°©ì•ˆ (Solution)

#### ì ‘ê·¼ ë°©ì‹ ì „í™˜
- **"í‡´ì¥ì€ ëŒ€ê¸°ì‹¤ì—ì„œë§Œ ë°œìƒí•œë‹¤"ëŠ” ê°€ì •**ì„ ë²„ë¦¬ê³ , **"ê²Œì„ ì¤‘ í‡´ì¥ë„ ì •ìƒ ì‹œë‚˜ë¦¬ì˜¤"**ë¡œ ì²˜ë¦¬í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
- í‡´ì¥ ì‹œ ê²Œì„ ìƒíƒœë¥¼ í™•ì¸í•˜ê³ , ê²Œì„ ì¤‘ì´ë©´ ìºì‹œë„ í•¨ê»˜ ì •ë¦¬í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

#### êµ¬ì²´ì ì¸ í•´ê²°ì±…

**1. ê²Œì„ ì¤‘ í‡´ì¥ ê°ì§€ ë° ìºì‹œ ì •ë¦¬**

```java
// GameRoomLeaveService.java
private ParticipantEventResponse handleParticipantLeave(...) {
    // 1. ì°¸ê°€ì ì •ë³´ ì‚­ì œ
    participantRepository.delete(participant);
    
    // 2. ë°© ì¸ì› ìˆ˜ ê°ì†Œ
    room.decrementParticipants();
    
    // âœ… 3. ê²Œì„ ì§„í–‰ ì¤‘ì´ë©´ ìºì‹œ ì •ë¦¬
    if (room.getStatus() == GameRoomStatus.IN_PROGRESS) {
        handleGameInProgressLeave(gameRoomId, userId);
    }
    
    gameRoomRepository.save(room);
    return response;
}

private void handleGameInProgressLeave(Long roomId, Long userId) {
    QuizStateCache.GameRoomState roomState = quizStateCache.getOrCreateRoomState(roomId);
    
    // âœ… 1. ìºì‹œì—ì„œ ì ìˆ˜ ì œê±°
    roomState.removeUserScore(userId);
    
    // âœ… 2. ëª¨ë“  ë¬¸ì œì—ì„œ ë„ì „ ìˆœì„œ ì œê±°
    for (int questionNumber = 1; questionNumber <= 8; questionNumber++) {
        Long currentChallenger = roomState.getCurrentChallenger(questionNumber);
        boolean wasCurrentChallenger = userId.equals(currentChallenger);
        
        // ë„ì „ ìˆœì„œì—ì„œ ì œê±°
        roomState.removeChallenger(questionNumber, userId);
        
        // âœ… 3. ë„ì „ ì°¨ë¡€ì˜€ë‹¤ë©´ ë‹¤ìŒ ë„ì „ìì—ê²Œ ë„˜ê¹€
        if (wasCurrentChallenger) {
            Long nextChallenger = roomState.getNextChallenger(questionNumber);
            if (nextChallenger != null) {
                log.info("ë‹¤ìŒ ë„ì „ìë¡œ ë³€ê²½: {}", nextChallenger);
            }
        }
    }
}
```

**2. QuizStateCacheì— ì œê±° ë©”ì„œë“œ ì¶”ê°€**

```java
// QuizStateCache.java
public static class GameRoomState {
    // âœ… ì‚¬ìš©ì ì ìˆ˜ ì œê±°
    public void removeUserScore(Long userId) {
        userScores.remove(userId);
    }

    // âœ… ë„ì „ì ì œê±°
    public void removeChallenger(Integer questionNumber, Long userId) {
        // íì—ì„œ ì œê±°
        Queue<Long> queue = challengerQueues.get(questionNumber);
        if (queue != null) {
            queue.remove(userId);
        }

        // ìˆœì„œ ë§µì—ì„œ ì œê±°
        Map<Long, Integer> orders = challengerOrders.get(questionNumber);
        if (orders != null) {
            orders.remove(userId);
        }

        // í˜„ì¬ ë„ì „ìì˜€ë‹¤ë©´ ì œê±°
        Long currentChallenger = currentChallengers.get(questionNumber);
        if (userId.equals(currentChallenger)) {
            currentChallengers.remove(questionNumber);
        }
    }
}
```

**3. ë­í‚¹ ìˆœìœ„ ê³„ì‚° ë¡œì§ ìˆ˜ì •**

```java
// QuizService.java - endGame()
@Transactional
public void endGame(Long roomId) {
    // ... ê¸°ì¡´ ë¡œì§ ...
    
    // âœ… ì‹¤ì œ ë­í‚¹ ì¹´ìš´í„° ì¶”ê°€
    int rank = 1;
    for (int i = 0; i < sortedScores.size(); i++) {
        Long userId = entry.getKey();
        User user = userMap.get(userId);
        
        if (user == null) {
            // âœ… ê²Œì„ ì¤‘ í‡´ì¥í•œ ì‚¬ìš©ìëŠ” ë­í‚¹ì—ì„œ ì œì™¸
            log.info("ê²Œì„ ì¤‘ í‡´ì¥í•œ ì‚¬ìš©ì ë­í‚¹ ì œì™¸ - userId: {}", userId);
            continue;  // ìˆœìœ„ ì¦ê°€ ì•ˆ í•¨
        }
        
        // GameHistory ì €ì¥
        historiesToSave.add(GameHistory.builder()
                .score(roundScore)
                .round(completedRound)
                .build());
        
        // User totalScore ì—…ë°ì´íŠ¸
        user.updateTotalScore(roundScore);
        
        // âœ… ìˆœìœ„ ì •ë³´ ìƒì„± (ì‹¤ì œ ë­í‚¹ ì‚¬ìš©)
        rankings.add(RankingInfo.builder()
                .rank(rank)  // âœ… ì—°ì†ëœ ìˆœìœ„
                .userId(user.getId())
                .score(roundScore)
                .build());
        
        rank++;  // âœ… ë‹¤ìŒ ìˆœìœ„ë¡œ ì¦ê°€
    }
}
```

#### ìµœì¢… í•´ê²° ê²°ê³¼

```
ì‹œë‚˜ë¦¬ì˜¤ 1: ì¼ë°˜ ì°¸ê°€ìê°€ ê²Œì„ ì¤‘ ë‚˜ê°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Aê°€ ì°½ì„ ë‹«ìŒ (ì—°ê²° í•´ì œ)            â”‚
â”‚ â†’ DBì—ì„œ GameParticipant ì‚­ì œ âœ…     â”‚
â”‚ â†’ ìºì‹œì—ì„œ ì ìˆ˜ ì œê±° âœ…              â”‚
â”‚ â†’ ëª¨ë“  ë¬¸ì œì˜ ë„ì „ ìˆœì„œì—ì„œ ì œê±° âœ…  â”‚
â”‚                                     â”‚
â”‚ ê²Œì„ ì¢…ë£Œ                            â”‚
â”‚ â†’ ìºì‹œì— Aì˜ ì ìˆ˜ ì—†ìŒ âœ…            â”‚
â”‚ â†’ AëŠ” ë­í‚¹ì—ì„œ ì œì™¸ë¨ âœ…             â”‚
â”‚ â†’ ìˆœìœ„: 1ë“±(B), 2ë“±(C), 3ë“±(D) âœ…    â”‚
â”‚   (ì—°ì†ëœ ìˆœìœ„)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì‹œë‚˜ë¦¬ì˜¤ 2: ë„ì „ ì°¨ë¡€ì¸ ì‚¬ëŒì´ ë‚˜ê°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í˜„ì¬ ì°¨ë¡€: A (currentChallenger=123) â”‚
â”‚                                     â”‚
â”‚ Aê°€ ì°½ì„ ë‹«ìŒ (ì—°ê²° í•´ì œ)            â”‚
â”‚ â†’ ìºì‹œì—ì„œ currentChallenger ì œê±° âœ… â”‚
â”‚ â†’ ìë™ìœ¼ë¡œ ë‹¤ìŒ ë„ì „ì(B)ì—ê²Œ âœ…     â”‚
â”‚                                     â”‚
â”‚ âœ… ê²Œì„ ê³„ì† ì§„í–‰!                   â”‚
â”‚ â†’ Bê°€ ë‹µì„ ì œì¶œí•  ìˆ˜ ìˆìŒ            â”‚
â”‚ â†’ ê²Œì„ì´ ë©ˆì¶”ì§€ ì•ŠìŒ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.  ëŠë‚€ ì  ë° êµí›ˆ (Retrospect)

ì´ë²ˆ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ í†µí•´ **"ë°ì´í„° ì¼ê´€ì„±"ì˜ ì¤‘ìš”ì„±**ì„ ë¼ˆì €ë¦¬ê²Œ ëŠê¼ˆìŠµë‹ˆë‹¤.

#### ê¸°ìˆ ì  êµí›ˆ

1. **ìºì‹œì™€ DBì˜ ë™ê¸°í™”**: 
   - DBë¥¼ ìˆ˜ì •í•˜ë©´ ìºì‹œë„ í•¨ê»˜ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.
   - í•œìª½ë§Œ ì •ë¦¬í•˜ë©´ ë°ì´í„° ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

2. **ìƒíƒœ ê¸°ë°˜ ì²˜ë¦¬**:
   - ë‹¨ìˆœíˆ "í‡´ì¥ ì²˜ë¦¬"ê°€ ì•„ë‹ˆë¼ "ì–´ë–¤ ìƒíƒœì—ì„œ í‡´ì¥í–ˆëŠ”ê°€"ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.
   - ëŒ€ê¸°ì‹¤ í‡´ì¥ê³¼ ê²Œì„ ì¤‘ í‡´ì¥ì€ ì™„ì „íˆ ë‹¤ë¥¸ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.

3. **ìˆœìœ„ ê³„ì‚° ë¡œì§**:
   - ë°˜ë³µë¬¸ì˜ ì¸ë±ìŠ¤ë¥¼ ê·¸ëŒ€ë¡œ ìˆœìœ„ë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.
   - `continue`ë¡œ ê±´ë„ˆë›°ëŠ” ê²½ìš°ë¥¼ ê³ ë ¤í•œ ë³„ë„ì˜ ì¹´ìš´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.

#### ì„¤ê³„ ê´€ì 

ì²˜ìŒì—ëŠ” "í‡´ì¥ì€ ì˜ˆì™¸ ìƒí™©"ì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ”:
- ë„¤íŠ¸ì›Œí¬ ëŠê¹€
- ë¸Œë¼ìš°ì € ê°•ì œ ì¢…ë£Œ
- ì˜ë„ì ì¸ ì´íƒˆ

ì´ ëª¨ë“  ê²ƒì´ **ì •ìƒì ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤**ì˜€ìŠµë‹ˆë‹¤. ì˜ˆì™¸ ìƒí™©ì„ ì •ìƒ ì‹œë‚˜ë¦¬ì˜¤ë¡œ ë°›ì•„ë“¤ì´ê³  ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ë°°ì› ìŠµë‹ˆë‹¤.

#### í˜‘ì—… ê´€ì 

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ì„œ **"ê²Œì„ì´ ë©ˆì¶”ì§€ ì•ŠëŠ” ê²ƒ"**ì´ ìµœìš°ì„  ëª©í‘œë¼ëŠ” ê²ƒì„ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í–ˆìŠµë‹ˆë‹¤. 
- í‡´ì¥í•œ ì‚¬ëŒì˜ ì ìˆ˜ë¥¼ ê¸°ë¡í•˜ì§€ ì•ŠëŠ” ê²ƒì€ ê´œì°®ìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ë‚¨ì€ ì‚¬ëŒë“¤ì˜ ê²Œì„ì´ ë©ˆì¶°ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ìš°ì„ ìˆœìœ„ë¥¼ ëª…í™•íˆ í•˜ë©´ì„œ, ì–´ë–¤ ê¸°ëŠ¥ì„ ë¨¼ì € êµ¬í˜„í•´ì•¼ í•˜ëŠ”ì§€ íŒë‹¨í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

#### ê°€ì¥ í° ê¹¨ë‹¬ìŒ

**"ì™„ë²½í•œ ë°ì´í„°ë³´ë‹¤ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤"**ê°€ ë” ì¤‘ìš”í•©ë‹ˆë‹¤. 
- í‡´ì¥í•œ ì‚¬ëŒì˜ GameHistoryê°€ ì €ì¥ë˜ì§€ ì•ŠëŠ” ê²ƒì€ ì•„ì‰½ì§€ë§Œ, ê²Œì„ì´ ê³„ì† ì§„í–‰ë˜ëŠ” ê²ƒì´ ë” ì¤‘ìš”í•©ë‹ˆë‹¤.
- ë°ì´í„° ì •í•©ì„±ì„ ìœ ì§€í•˜ë©´ì„œë„ ì„œë¹„ìŠ¤ì˜ ì•ˆì •ì„±ì„ í•´ì¹˜ì§€ ì•ŠëŠ” ê· í˜•ì ì„ ì°¾ëŠ” ê²ƒì´ í•µì‹¬ì´ì—ˆìŠµë‹ˆë‹¤.

ì´ë²ˆ ê²½í—˜ì„ í†µí•´ **"ë°©ì–´ì  í”„ë¡œê·¸ë˜ë°"**ì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ê³ , ì•ìœ¼ë¡œëŠ” "ì´ëŸ° ì¼ì€ ì¼ì–´ë‚˜ì§€ ì•Šì„ ê²ƒ"ì´ë¼ëŠ” ê°€ì • ëŒ€ì‹  "ì´ëŸ° ì¼ì´ ì¼ì–´ë‚˜ë©´ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€"ë¥¼ ë¨¼ì € ê³ ë¯¼í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
